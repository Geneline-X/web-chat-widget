/**
 * GeniStudio Web Chat Widget v2.0.3
 * https://genistud.io
 * 
 * @license MIT
 * Copyright 2025 Geni Studio <info@geneline-x.net>
 */
var GeniStudioWebChat=function(e){"use strict";async function t(e,t,n,o,s,i,a,r){try{r&&r(!0);const a={chatbotId:t,email:n,message:o};console.log("Sending message to GeniStudio API:",e,a);const c=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(console.log("API Response status:",c.status,c.statusText),!c.ok){const e=await c.text();let t;console.error("API response error:",c.status,e);try{t=JSON.parse(e).message||`HTTP ${c.status}: ${c.statusText}`}catch(e){t=`HTTP ${c.status}: ${c.statusText}`}throw new Error(t)}const l=c.body?.getReader();if(!l){const e=await c.text();console.log("Non-streaming response received:",e),r&&r(!1);let t=e;try{const n=JSON.parse(e);n.message&&(t=n.message)}catch(e){console.warn("Failed to parse JSON response, using raw text:",e)}return i&&i({text:t,timestamp:(new Date).toISOString()}),{text:t}}let d="";for(;;){const{done:e,value:t}=await l.read();if(e)break;const n=(new TextDecoder).decode(t);d+=n;let o=n;try{const e=JSON.parse(n);e.message&&(o=e.message)}catch(e){}s&&(console.log("Sending chunk to callback:",o),s(o))}console.log("Complete response received:",d);let u=d;try{const e=JSON.parse(d);e.message&&(u=e.message)}catch(e){console.warn("Failed to parse JSON response, using raw text:",e)}return r&&r(!1),i&&i({text:u,timestamp:(new Date).toISOString()}),{text:u}}catch(e){if(console.error("GeniStudio API request failed:",e),r&&r(!1),a){let t;t=e.message.includes("Failed to fetch")?"Unable to connect to chat service. Please check your internet connection and try again.":e.message.includes("CORS")?"Unable to connect to chat service due to security restrictions.":`Failed to communicate with chat service: ${e.message}`,a(t)}throw e}}function n(e){return e?e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*((?!\*)(.*?))\*/g,"<em>$1</em>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replace(/`([^`]+)`/g,"<code>$1</code>").replace(/^\*\s+(.+)$/gm,"<li>$1</li>").replace(/^\d+\.\s+(.+)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)/gs,function(e){return"<ul>"+e+"</ul>"}).replace(/<\/ul>\s*<ul>/g,"").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^(?!<[uo]l>|<li>)(.+)$/gm,function(e){return e.startsWith("<")||""===e.trim()?e:"<p>"+e+"</p>"}).replace(/<p><\/p>/g,"").replace(/<p>(<[uo]l>.*<\/[uo]l>)<\/p>/gs,"$1"):""}function o(e,t){if(!t)return!0;const n=new Date(e.timestamp),o=new Date(t.timestamp);return i=o,!((s=n)&&i&&(s=new Date(s),i=new Date(i),s.getFullYear()===i.getFullYear()&&s.getMonth()===i.getMonth()&&s.getDate()===i.getDate()));var s,i}function s(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const o=document.createElement("div");if(o.className="message "+("bot"===e.sender?"bot-message":"user-message"),t&&(o.classList.add("message-entering"),setTimeout(()=>{o.classList.remove("message-entering")},500)),"bot"===e.sender?o.innerHTML=`\n      <svg class="bot-avatar" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">\n        <path d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"/>\n      </svg>\n      <div class="message-text">${n(e.text||"")}</div>\n    `:o.innerHTML=`\n      <div class="message-text">${n(e.text||"")}</div>\n    `,e.isStreaming&&"bot"===e.sender){const e=o.querySelector(".message-text");e&&(e.innerHTML+='<span class="cursor">|</span>')}return o}function i(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=document.createElement("div");return t.className="message bot-message thinking typing-wrapper",e&&(t.classList.add("message-entering"),setTimeout(()=>{t.classList.remove("message-entering")},500)),t.innerHTML='\n    <svg class="bot-avatar" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">\n      <path d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"/>\n    </svg>\n    <div class="message-text">\n      <div class="thinking-indicator">\n        <div class="dot"></div>\n        <div class="dot"></div>\n        <div class="dot"></div>\n      </div>\n    </div>\n  ',t}function a(e,t){if(e.startsWith("#")){const n=e.slice(1),o=parseInt(n,16);return`#${(Math.max(0,Math.floor((o>>16)*(1-t)))<<16|Math.max(0,Math.floor((o>>8&255)*(1-t)))<<8|Math.max(0,Math.floor((255&o)*(1-t)))).toString(16).padStart(6,"0")}`}if(e.startsWith("rgb")){const n=e.match(/\d+/g);if(n){return`rgba(${Math.max(0,Math.floor(parseInt(n[0])*(1-t)))}, ${Math.max(0,Math.floor(parseInt(n[1])*(1-t)))}, ${Math.max(0,Math.floor(parseInt(n[2])*(1-t)))}, ${n[3]?parseFloat(n[3]):1})`}}return"#007bff"===e?"#0056b3":"#3d39ac"}
/**
   * GeniStudio Web Chat Widget - Main Module
   * Connects UI components and GeniStudio HTTP API communication
   */
function r(){let e={apiUrl:"https://genibot-mini-sever.onrender.com/api/chatbot/stream",chatbotId:"",userEmail:"",buttonColor:"",injectCSS:!1,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};if(e.chatbotName&&"string"==typeof e.chatbotName||(e.chatbotName="GeniStudio Support"),!e.chatbotId)return console.error("GeniStudio: chatbotId is required"),null;if(!e.userEmail){const t="web_"+Math.random().toString(36).substring(2,15);e.userEmail=`${t}@webchat.genistudio.com`}let r=!1,c=[],l=!1,d=null,u={};const m=function(e){const t=document.createElement("button");if(t.id="GeniStudio-chat-button",t.className="webchat-button",t.innerHTML='\n    <span class="chat-icon">\n      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">\n        <path d="M160-240q-33 0-56.5-23.5T80-320v-480q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v720L720-240H160Z"/>\n      </svg>\n    </span>\n    <span class="close-icon">\n      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">\n        <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>\n      </svg>\n    </span>\n  ',t.title="Open chat",e.buttonColor){document.documentElement.style.setProperty("--webchat-primary-color",e.buttonColor);const t=a(e.buttonColor,.15);document.documentElement.style.setProperty("--webchat-primary-hover",t)}e.buttonStyles&&Object.assign(t.style,e.buttonStyles);const n=e.position||"bottom-right";return n.includes("left")?(t.style.left="35px",t.style.right="auto"):t.style.right="35px",n.includes("top")?(t.style.top="30px",t.style.bottom="auto"):t.style.bottom="30px",t}(e);document.body.appendChild(m),m.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("Chat button clicked, current state:",r?"open":"closed"),g()});const h=function(e,t){if(e.buttonColor){document.documentElement.style.setProperty("--webchat-primary-color",e.buttonColor);const t=a(e.buttonColor,.15);document.documentElement.style.setProperty("--webchat-primary-hover",t)}const n=document.createElement("div");n.id="GeniStudio-chat-overlay",n.className="webchat-overlay hidden";const o=e.position||"bottom-right";return o.includes("left")?n.style.transformOrigin=o.includes("top")?"top left":"bottom left":n.style.transformOrigin=o.includes("top")?"top right":"bottom right",n.innerHTML=`\n    <div class="webchat-container">\n      \x3c!-- Chat Header --\x3e\n      <div class="chat-header">\n        <div class="header-info">\n          <svg class="chatbot-logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">\n            <path d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"/>\n          </svg>\n          <h2 class="logo-text">${e.chatbotName||"Chatbot"}</h2>\n        </div>\n        <button id="GeniStudio-close-btn" class="close-button">\n          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <path d="M6 9l6 6 6-6"/>\n          </svg>\n        </button>\n      </div>\n      \n      \x3c!-- Chat Body --\x3e\n      <div class="chat-body">\n        <div id="GeniStudio-messages" class="webchat-messages">\n          \x3c!-- Messages will be rendered here --\x3e\n        </div>\n      </div>\n      \n      \x3c!-- Chat Footer --\x3e\n      <div class="chat-footer">\n        <form class="chat-form" id="GeniStudio-input-form">\n          <textarea \n            id="GeniStudio-input"\n            class="message-input" \n            placeholder="Type your message..."\n            required\n            rows="1"\n          ></textarea>\n          <div class="chat-controls">\n            <button type="submit" id="GeniStudio-send-btn" class="send-button">\n              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <path d="M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z"/>\n              </svg>\n            </button>\n          </div>\n        </form>\n        \n        \x3c!-- Powered by GeniStudio --\x3e\n        <div class="webchat-powered-by">\n          <span class="powered-text">Powered by</span>\n          <span class="geni-studio">GeniStudio</span>\n        </div>\n      </div>\n    </div>\n  `,setTimeout(()=>{const e=document.getElementById("GeniStudio-input-form");e&&e.addEventListener("submit",t.sendMessage);const n=document.getElementById("GeniStudio-close-btn");n&&n.addEventListener("click",t.close);const o=document.getElementById("GeniStudio-input");if(o){const e=o.scrollHeight;o.setAttribute("data-initial-height",`${e}px`),o.addEventListener("input",()=>{o.style.height=`${e}px`,o.style.height=`${o.scrollHeight}px`;const t=document.querySelector(".chat-form");t&&(t.style.borderRadius=o.scrollHeight>e?"15px":"25px")}),o.addEventListener("keydown",e=>{const n=e.target.value.trim();"Enter"===e.key&&!e.shiftKey&&n&&window.innerWidth>768&&(e.preventDefault(),t.sendMessage(e))})}},0),n}(e,{sendMessage:e=>k(e),close:()=>v(),toggleExpand:()=>H()});function g(){r=!r;const e=document.getElementById("GeniStudio-chat-overlay"),t=document.getElementById("GeniStudio-chat-button");if(r){const n=window.innerWidth<=768;p(),e.classList.remove("hidden"),e.classList.add("visible"),n&&document.body.classList.add("webchat-open"),T(),t&&(t.classList.add("is-open"),t.title="Close chat"),$("chatOpened");const o=document.getElementById("GeniStudio-input");o&&!o.disabled&&o.focus()}else{e.classList.remove("visible"),e.classList.add("hidden");window.innerWidth<=768&&document.body.classList.remove("webchat-open"),t&&(t.classList.remove("is-open"),t.title="Open chat"),$("chatClosed")}}function p(){const t=document.getElementById("GeniStudio-chat-button"),n=document.getElementById("GeniStudio-chat-overlay").querySelector(".webchat-container");if(t&&n){if(window.innerWidth<=768)n.style.right="",n.style.left="",n.style.bottom="",n.style.top="",n.classList.add("mobile-fullscreen");else{const o=t.getBoundingClientRect(),s=e.position||"bottom-right";n.classList.remove("mobile-fullscreen"),s.includes("right")?(n.style.right="20px",n.style.left="auto"):(n.style.left="20px",n.style.right="auto"),s.includes("bottom")?(n.style.bottom=window.innerHeight-o.top+10+"px",n.style.top="auto"):(n.style.top=o.bottom+10+"px",n.style.bottom="auto")}}}function v(){r=!1;const e=document.getElementById("GeniStudio-chat-overlay");e.classList.remove("visible"),e.classList.add("hidden");window.innerWidth<=768&&document.body.classList.remove("webchat-open");const t=document.getElementById("GeniStudio-chat-button");t&&(t.classList.remove("is-open"),t.title="Open chat"),$("chatClosed")}function f(e){if(console.log("Received API streaming chunk:",e),!d){const e=new Date,t=[...c].reverse().find(e=>"user"===e.sender);if(t&&u[t.id]){const n=D(((e-u[t.id].sentAt)/1e3).toFixed(2));console.log(`Time to first response: ${n}`)}d={id:Date.now(),text:"",sender:"bot",timestamp:e,isStreaming:!0},c.push(d),E(),L(d)}d.text+=e;const t=document.getElementById("GeniStudio-messages"),o=t?.lastElementChild;if(o&&d){const e=o.querySelector(".message-text");e&&(e.innerHTML=n(d.text||""),d.isStreaming&&(e.innerHTML+='<span class="cursor">|</span>'))}G()}function w(e){if(console.log("API streaming complete received:",e),d){const e=[...c].reverse().find(e=>"user"===e.sender);if(e&&u[e.id]){const t=u[e.id].sentAt,n=D(((new Date-t)/1e3).toFixed(2));console.log(`Total response time: ${n}`)}d.isStreaming=!1,d=null}E(),M(),T(),console.log("API streaming complete:",e)}function b(e){console.error("API error:",e),S(e),M()}function y(e){e?x("typing"):E()}function S(e){E();const t={id:Date.now(),text:e||"Sorry, I'm having trouble connecting right now. Please try again later.",sender:"bot",timestamp:new Date,isError:!0};c.push(t),T(),M(),d=null}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"typing";l=!0,C=e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"typing";const t=document.getElementById("GeniStudio-messages");if(!t)return;const n=t.querySelector(".typing-wrapper");n&&n.remove();const o=i(e,!0);t.appendChild(o),G()}(e)}function E(){l=!1,C=null;const e=document.getElementById("GeniStudio-messages");if(e){const t=e.querySelector(".typing-wrapper");t&&(t.style.opacity="0",t.style.transform="translateX(-30px) scale(0.9)",setTimeout(()=>{t.parentNode&&t.remove()},300))}}function M(){const e=document.getElementById("GeniStudio-input"),t=document.getElementById("GeniStudio-send-btn");e&&(e.disabled=!1),t&&(t.disabled=!1),e&&e.focus()}function I(){const e=document.getElementById("GeniStudio-input"),t=document.getElementById("GeniStudio-send-btn");e&&(e.disabled=!0),t&&(t.disabled=!0)}document.body.appendChild(h),"undefined"!=typeof window&&(window.addEventListener("beforeunload",B),window.addEventListener("resize",function(e,t){let n;return function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];const a=()=>{clearTimeout(n),e(...s)};clearTimeout(n),n=setTimeout(a,t)}}(()=>{r&&p()},250)));let C=null;function G(){const e=document.getElementById("GeniStudio-messages");if(e){e.scrollTop=e.scrollHeight;const t=e.lastElementChild;t&&t.scrollIntoView({behavior:"smooth",block:"end"}),setTimeout(()=>{e.scrollTop=e.scrollHeight},100)}}function L(t){const n=document.getElementById("GeniStudio-messages");if(!n)return;"bot"===t.sender&&(t.botName=e.chatbotName,t.avatar=e.avatarUrl);const o=s(t,!0);n.appendChild(o),G()}function T(){const n=document.getElementById("GeniStudio-messages");if(!n)return;if(n.innerHTML="",0===c.length&&!l)return void n.appendChild((document.createElement("div").className="webchat-empty-state",s({id:"welcome",text:"Hey there 👋\nHow can I help you today?",sender:"bot",timestamp:new Date,isStreaming:!1},!1)));const a=function(e){return e&&e.length?e.map((t,n)=>{const s=n>0?e[n-1]:null,i=!s||s.sender!==t.sender||o(t,s),a=n===e.length-1||e[n+1].sender!==t.sender||o(e[n+1],t),r=o(t,s);return{...t,isFirstInGroup:i,isLastInGroup:a,needsDateSeparator:r}}):[]}(c);a.forEach(t=>{if(!t.isStreaming||d===t){if(t.needsDateSeparator){const e=new Date(t.timestamp);n.appendChild(function(e){const t=document.createElement("div");t.className="webchat-date-separator";const n=new Date,o=new Date(n);let s;return o.setDate(o.getDate()-1),s=e.toDateString()===n.toDateString()?"Today":e.toDateString()===o.toDateString()?"Yesterday":e.toLocaleDateString(),t.innerHTML=`<span>${s}</span>`,t}(e))}t.isFirstInGroup=t.isFirstInGroup||!1,t.isLastInGroup=t.isLastInGroup||!1,"bot"===t.sender&&(t.botName=e.chatbotName,t.avatar=e.avatarUrl),n.appendChild(s(t,!1))}}),l&&n.appendChild(i(C,!0));const r=document.getElementById("GeniStudio-quick-replies");if(r){r.innerHTML="";const n=a[a.length-1];if(n&&n.quickReplies&&n.quickReplies.length>0){const o=function(e,t){const n=document.createElement("div");return n.className="webchat-quick-replies-container",e.forEach(e=>{const o=document.createElement("button");o.className="webchat-quick-reply-button",o.textContent=e.text||e.title,o.onclick=()=>t(e.value||e.payload,e.text||e.title),n.appendChild(o)}),n}(n.quickReplies,(n,o)=>{!function(n,o){const s={id:Date.now(),text:o,sender:"user",timestamp:new Date,isQuickReply:!0};c.push(s);const i=document.getElementById("GeniStudio-quick-replies");i&&(i.innerHTML="");I(),L(s),x("processing"),t(e.apiUrl,e.chatbotId,e.userEmail,o,f,w,b,y).catch(e=>{console.error("Error sending quick reply to GeniStudio API:",e),S("Failed to send message. Please try again.")})}(0,o)});r.appendChild(o)}}G()}function k(n){n&&n.preventDefault();const o=document.getElementById("GeniStudio-input"),s=o.value.trim();if(!s||l)return;const i=Date.now();u[i]={sentAt:new Date,message:s};const a={id:i,text:s,sender:"user",timestamp:new Date};c.push(a),o.value="";const r=o.getAttribute("data-initial-height")||"47px";o.style.height=r;const d=document.querySelector(".chat-form");d&&(d.style.borderRadius="25px"),I(),L(a),x("processing");const m=document.getElementById("GeniStudio-messages");m&&(m.scrollTop=m.scrollHeight),t(e.apiUrl,e.chatbotId,e.userEmail,s,f,w,b,y).catch(e=>{console.error("Error sending message to GeniStudio API:",e),S("Failed to send message. Please try again.")})}function B(){d=null,console.log("Chat widget cleanup completed")}function $(e){if("undefined"!=typeof window){const t=new CustomEvent(`geniStudio:${e}`,{detail:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}});document.dispatchEvent(t)}}function D(e){const t=parseFloat(e);if(t<.1)return`${Math.round(1e3*t)}ms`;if(t<1)return`${(1e3*t).toFixed(0)}ms`;if(t<60)return`${t.toFixed(2)}s`;return`${Math.floor(t/60)}m ${(t%60).toFixed(1)}s`}function H(){const e=document.querySelector(".webchat-container"),t=document.getElementById("GeniStudio-expand-btn");if(e){e.classList.toggle("expanded"),t&&(e.classList.contains("expanded")?(t.innerHTML='\n            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n              <path d="M4 12L12 4M6 4H12M12 4V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" transform="rotate(180 8 8)"/>\n            </svg>\n          ',t.title="Collapse"):(t.innerHTML='\n            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n              <path d="M4 12L12 4M12 4H6M12 4V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>\n          ',t.title="Expand"));const n=document.getElementById("GeniStudio-messages");n&&setTimeout(()=>{n.scrollTop=n.scrollHeight},100)}}return{open:()=>{r||g()},close:()=>{r&&v()},toggle:()=>{g()},toggleExpand:()=>{H()},sendMessage:e=>{if("string"==typeof e&&e.trim()){const t=document.getElementById("GeniStudio-input");t&&(t.value=e,k())}},reset:()=>(c=[],T(),!0),cleanup:B}}function c(){const e=document.getElementById("genistudio-webchat-styles");if(e)return e;const t="genistudio-webchat-styles-"+Math.random().toString(36).substring(2,9),n=document.createElement("link");return n.id=t,n.rel="stylesheet",n.href="dist/index.cdn.css",document.head.appendChild(n),n}
/**
   * GeniStudio Web Chat Widget
   * Main entry point for the library
   *
   * This file exports:
   * 1. initWebChat - Vanilla JS function to initialize the chat widget
   * Simplified for CDN-only usage
   */
function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.injectCSS&&c(),e.useShadowDOM){const t=function(){const e=document.createElement("div");e.id="genistudio-webchat-container",document.body.appendChild(e);const t=e.attachShadow({mode:"open"}),n=document.createElement("link");return n.rel="stylesheet",n.href="dist/index.cdn.css",t.appendChild(n),t}();e._shadowRoot=t}return r(e)}if("undefined"!=typeof window&&(window.GeniStudioWebChat=window.GeniStudioWebChat||{},window.GeniStudioWebChat.initWebChat=l,window.GeniStudioConfig)){const e=l(window.GeniStudioConfig);Object.keys(e).forEach(t=>{window.GeniStudioWebChat[t]=e[t]})}var d={initWebChat:l};return e.default=d,e.initWebChat=l,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=index.cdn.js.map
